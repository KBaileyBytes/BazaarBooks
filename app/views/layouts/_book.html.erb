<div class="card">
  <div class="card-image">
    <figure class="image is-4by5">
      <%= image_tag book.image %>
    </figure>
  </div>
  <div class="card-content">
    <div class="media">
      <div class="media-content">
        <strong class="is-4">
          <%= link_to book.title.truncate(20, omission: " ..."), book %>
        </strong>
        <p class="subtitle is-6">
          by <%= link_to book&.author&.name&.truncate(20, omission: " ..."), book.author %>
        </p>
        <p class="is-size-6">
          <a href="<%= books_by_genre_path(genre_id: book.genres.first.id) %>">
            <span class="has-text-link"><%= book.genres.first.name.truncate(24, omission: " ...") %></span>
          </a>
        </p>
      </div>
    </div>
    <div class="content">
      <div class="mb-1">
        <b>
          $<%= sprintf('%.2f', book.price) %>
        </b>
        <% book.formats.each do |book_format| %>
          <span class="tag">
            <%= book_format.name %>
          </span>
        <% end %>
      </div>
      <div class="is-flex is-align-items-center">
        <div class="mr-2">
          <span class="is-size-7"><i><%= book.average_rating.to_i %> / 10</i></span>
        </div>
        <div class="flex-grow">
          <progress class="progress is-primary" value="<%= book.average_rating %>" max="10"><%= book.average_rating %>%</progress>
        </div>
      </div>
    </div>
  </div>
</div>
